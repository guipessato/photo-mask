{"version":3,"sources":["components/imagens-mask/index.js"],"names":["$","document","ready","profileImageFile","overlayImageFile","profileImg","Image","overlayImg","canvas","getElementById","ctx","getContext","canvasSize","updateDownloadLink","dataURL","toDataURL","attr","show","width","height","on","reader","this","files","FileReader","onload","event","src","target","result","clearRect","drawImage","readAsDataURL"],"mappings":"AAAAA,EAAAC,QAAA,EAAAC,MAAA,WACA,IAAAC,EACAC,EACAC,EAAA,IAAAC,MACAC,EAAA,IAAAD,MACAE,EAAAP,SAAAQ,eAAA,gBAAA,EACAC,EAAAF,EAAAG,WAAA,IAAA,EACAC,EAAA,IAsCA,SAAAC,IACA,IAAAC,EAAAN,EAAAO,UAAA,WAAA,EACAf,EAAA,WAAA,EAAAgB,KAAA,OAAAF,CAAA,EACAd,EAAA,gBAAA,EAAAiB,KAAA,CACA,CAvCAT,EAAAU,MAAAN,EACAJ,EAAAW,OAAAP,EAyCAZ,EAAA,qBAAA,EAAAoB,GAAA,SAAA,WAtCA,IAEAC,GAqCAlB,EAAAmB,KAAAC,MAAA,OArCAF,EAAA,IAAAG,YACAC,OAAA,SAAAC,GACArB,EAAAsB,IAAAD,EAAAE,OAAAC,OACAxB,EAAAoB,OAAA,WACAf,EAAAoB,UAAA,EAAA,EAAAtB,EAAAU,MAAAV,EAAAW,MAAA,EACAT,EAAAqB,UAAA1B,EAAA,EAAA,EAAAO,EAAAA,CAAA,EACAC,EAAA,CACA,CACA,EACAQ,EAAAW,cAAA7B,CAAA,EA8BA,CAAA,EAGAH,EAAA,qBAAA,EAAAoB,GAAA,SAAA,WA5BA,IAEAC,EA2BAjB,EAAAkB,KAAAC,MAAA,GA5BAlB,EAAAsB,KAAAvB,KACAiB,EAAA,IAAAG,YACAC,OAAA,SAAAC,GACAnB,EAAAoB,IAAAD,EAAAE,OAAAC,OACAtB,EAAAkB,OAAA,WACAf,EAAAqB,UAAAxB,EAAA,EAAA,EAAAK,EAAAA,CAAA,EACAC,EAAA,CACA,CACA,EACAQ,EAAAW,cAAA5B,CAAA,EAqBA,CAAA,CACA,CAAA","file":"scripts.min.js","sourcesContent":["$(document).ready(function() {\r\n    var profileImageFile = null;\r\n    var overlayImageFile = null;\r\n    var profileImg = new Image();\r\n    var overlayImg = new Image();\r\n    var canvas = document.getElementById('combinedCanvas');\r\n    var ctx = canvas.getContext('2d');\r\n    var canvasSize = 800; // Tamanho fixo do canvas\r\n\r\n    // Configura o tamanho do canvas\r\n    canvas.width = canvasSize;\r\n    canvas.height = canvasSize;\r\n\r\n    // Função para desenhar a imagem de perfil no canvas\r\n    function drawProfileImage() {\r\n        if (profileImageFile) {\r\n            var reader = new FileReader();\r\n            reader.onload = function(event) {\r\n                profileImg.src = event.target.result;\r\n                profileImg.onload = function() {\r\n                    ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpa o canvas\r\n                    ctx.drawImage(profileImg, 0, 0, canvasSize, canvasSize);\r\n                    updateDownloadLink(); // Atualiza o link de download se a máscara já foi carregada\r\n                };\r\n            };\r\n            reader.readAsDataURL(profileImageFile);\r\n        }\r\n    }\r\n\r\n    // Função para desenhar a máscara no canvas\r\n    function drawOverlayImage() {\r\n        if (profileImg.src && overlayImageFile) {\r\n            var reader = new FileReader();\r\n            reader.onload = function(event) {\r\n                overlayImg.src = event.target.result;\r\n                overlayImg.onload = function() {\r\n                    ctx.drawImage(overlayImg, 0, 0, canvasSize, canvasSize);\r\n                    updateDownloadLink(); // Atualiza o link de download com a nova imagem combinada\r\n                };\r\n            };\r\n            reader.readAsDataURL(overlayImageFile);\r\n        }\r\n    }\r\n\r\n    // Atualiza o link de download com a imagem combinada\r\n    function updateDownloadLink() {\r\n        var dataURL = canvas.toDataURL('image/png');\r\n        $('#download').attr('href', dataURL);\r\n        $('#download-link').show(); // Mostra o link de download\r\n    }\r\n\r\n    // Evento de alteração para o upload da imagem de perfil\r\n    $('#profileImageUpload').on('change', function() {\r\n        profileImageFile = this.files[0];\r\n        drawProfileImage(); // Exibe a imagem de perfil no canvas\r\n    });\r\n\r\n    // Evento de alteração para o upload da máscara\r\n    $('#overlayImageUpload').on('change', function() {\r\n        overlayImageFile = this.files[0];\r\n        drawOverlayImage(); // Atualiza o canvas com a máscara sobre a imagem de perfil\r\n    });\r\n});\r\n"]}